(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{126:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(50),u=n.n(c),s=n(36),o=(n(98),n(27)),i=n(84),l=n(5),b=n(85),j=n.n(b),d=n(1);function f(e){var t=e.children;return Object(d.jsx)("div",{className:j.a.container,children:t})}var p=n(25),O=n.n(p);function h(){return Object(d.jsxs)("nav",{className:O.a.nav,children:[Object(d.jsx)(s.b,{to:"/",className:function(e){return e.isActive?O.a.nav__link_active:O.a.nav__link},children:"Home"}),Object(d.jsx)(s.b,{to:"/contacts",className:function(e){return e.isActive?O.a.nav__link_active:O.a.nav__link},children:"Contacts"})]})}function _(){return Object(d.jsxs)("nav",{className:O.a.nav,children:[Object(d.jsx)(s.b,{to:"/register",className:function(e){return e.isActive?O.a.nav__link_active:O.a.nav__link},children:"Sign in"}),Object(d.jsx)(s.b,{to:"/login",className:function(e){return e.isActive?O.a.nav__link_active:O.a.nav__link},children:"Login"})]})}var v=n(63),x=n(148),g=n(147),m=n(28),k=function(e){return e.auth.user.name},y=function(e){return e.auth.isLoggedIn},w=function(e){return e.auth.isFetchingCurrentUser},N=n(48),C=n.n(N);function L(){var e=Object(o.b)(),t=Object(o.c)(k);function n(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var r="#";for(t=0;t<3;t+=1){r+="00".concat((n>>8*t&255).toString(16)).substr(-2)}return r}return Object(d.jsxs)("div",{className:C.a.user_menu,children:[Object(d.jsx)(x.a,Object(v.a)(Object(v.a)({},function(e){return{sx:{bgcolor:n(e)},children:1===e.split(" ").length?"".concat(e[0]):"".concat(e.split(" ")[0][0]).concat(e.split(" ")[1][0])}}(t)),{},{className:C.a.user_menu__avatar})),Object(d.jsxs)("span",{className:C.a.user_menu__greeting,children:["Hello, ",t,"!"]}),Object(d.jsx)(g.a,{className:C.a.user_menu__button,variant:"outlined",color:"error",onClick:function(){return e(m.b())},children:"Logout"})]})}var A=n(88),U=n.n(A);function z(){var e=Object(o.c)(y);return Object(d.jsxs)("ul",{className:U.a.app_bar,children:[Object(d.jsx)(h,{}),e?Object(d.jsx)(L,{}):Object(d.jsx)(_,{})]})}var F=n(81),I=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,213))})),P=Object(r.lazy)((function(){return n.e(1).then(n.bind(null,221))})),S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,214))})),B=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,218))})),M=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,219))}));function E(){var e=Object(o.b)(),t=Object(o.c)(y),n=Object(o.c)(w);return Object(r.useEffect)((function(){e(m.c())}),[e]),!n&&Object(d.jsxs)(f,{children:[Object(d.jsx)(z,{}),Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)(F.a,{}),children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/",element:Object(d.jsx)(I,{})}),Object(d.jsx)(l.b,{path:"/register",element:t?Object(d.jsx)(l.a,{replace:!0,to:"/contacts"}):Object(d.jsx)(S,{})}),Object(d.jsx)(l.b,{path:"/login",element:t?Object(d.jsx)(l.a,{replace:!0,to:"/contacts"}):Object(d.jsx)(B,{})}),Object(d.jsx)(l.b,{path:"/contacts",element:t?Object(d.jsx)(P,{}):Object(d.jsx)(l.a,{replace:!0,to:"/login"})}),Object(d.jsx)(l.b,{path:"*",element:Object(d.jsx)(M,{})})]})})]})}var R,V,q,H,J=n(7),W=n(37),G=n(89),Q=n.n(G),T=n(3),X=n(24),Y=n(19),D=n(41),K=n(22),Z=Object(J.d)([],(R={},Object(T.a)(R,K.c.fulfilled,(function(e,t){return t.payload})),Object(T.a)(R,K.a.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(X.a)(e),[n])})),Object(T.a)(R,K.b.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),R)),$=Object(J.d)(!1,(V={},Object(T.a)(V,K.c.pending,(function(){return!0})),Object(T.a)(V,K.c.fulfilled,(function(){return!1})),Object(T.a)(V,K.c.rejected,(function(){return!1})),V)),ee=Object(J.d)("",Object(T.a)({},D.b,(function(e,t){return t.payload}))),te=Object(J.d)(null,(q={},Object(T.a)(q,K.c.rejected,(function(e,t){return t.payload})),Object(T.a)(q,K.c.pending,(function(){return null})),Object(T.a)(q,K.a.rejected,(function(e,t){return t.payload})),Object(T.a)(q,K.a.pending,(function(){return null})),Object(T.a)(q,K.b.rejected,(function(e,t){return t.payload})),Object(T.a)(q,K.b.pending,(function(){return null})),q)),ne=Object(Y.b)({entities:Z,isLoading:$,filter:ee,error:te}),re=Object(J.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(H={},Object(T.a)(H,m.d.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(T.a)(H,m.a.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(T.a)(H,m.b.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(T.a)(H,m.c.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(T.a)(H,m.c.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(T.a)(H,m.c.rejected,(function(e){e.isFetchingCurrentUser=!1})),H)}).reducer,ae={key:"auth",storage:Q.a,whitelist:["token"]},ce=Object(J.a)({reducer:{auth:Object(W.g)(ae,re),contacts:ne},middleware:function(e){return e({serializableCheck:{ignoredActions:[W.a,W.f,W.b,W.c,W.d,W.e]}})},devTools:!1}),ue=Object(W.h)(ce);u.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(o.a,{store:ce,children:Object(d.jsx)(i.a,{loading:null,persistor:ue,children:Object(d.jsx)(s.a,{children:Object(d.jsx)(E,{})})})})}),document.getElementById("root"))},22:function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return _}));var r=n(8),a=n.n(r),c=n(23),u=n(7),s=n(41),o=n(26),i=n.n(o);function l(){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/contacts");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(a.a.mark((function e(t,n){var r,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={name:t,number:n},e.next=3,i.a.post("/contacts",r);case 3:return c=e.sent,u=c.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.delete("/contacts/".concat(t));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=Object(u.c)(s.d,Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),h=Object(u.c)(s.a,function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n=t.name,r=t.number,e.next=4,j(n,r);case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=Object(u.c)(s.c,function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},25:function(e,t,n){e.exports={nav:"Navigation_nav__3x5Lj",nav__link:"Navigation_nav__link__3aRy-",nav__link_active:"Navigation_nav__link_active__dLAQV"}},28:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(8),a=n.n(r),c=n(23),u=n(7),s=n(26),o=n.n(s);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""},b=Object(u.c)("auth/register",function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/signup",t);case 3:return n=e.sent,r=n.data,i(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),j=Object(u.c)("auth/login",function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/login",t);case 3:return n=e.sent,r=n.data,i(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),d=Object(u.c)("auth/logout",Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/logout");case 3:l(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),f=Object(u.c)("auth/refresh",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return i(c),e.prev=5,e.next=8,o.a.get("/users/current");case 8:return u=e.sent,s=u.data,e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n(7),a=Object(r.b)("Phonebook/changeFilter"),c=Object(r.b)("Phonebook/fetchContacts"),u=Object(r.b)("Phonebook/addContact"),s=Object(r.b)("Phonebook/delContact")},48:function(e,t,n){e.exports={user_menu:"UserMenu_user_menu__1Yrd3",user_menu__avatar:"UserMenu_user_menu__avatar__2Wh-d",user_menu__greeting:"UserMenu_user_menu__greeting__2BovF",user_menu__button:"UserMenu_user_menu__button__3Pd4d"}},65:function(e,t,n){e.exports={lds_wrapper:"Loader_lds_wrapper__XwnsC",lds_default:"Loader_lds_default__2rVvq"}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(0);var r=n(65),a=n.n(r),c=n(1);function u(){return Object(c.jsx)("div",{className:a.a.lds_wrapper,children:Object(c.jsxs)("div",{className:a.a.lds_default,children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})})}},85:function(e,t,n){e.exports={container:"Container_container__BqGaC"}},88:function(e,t,n){e.exports={app_bar:"AppBar_app_bar__2E5hs"}},98:function(e,t,n){}},[[126,7,8]]]);
//# sourceMappingURL=main.b419afdd.chunk.js.map