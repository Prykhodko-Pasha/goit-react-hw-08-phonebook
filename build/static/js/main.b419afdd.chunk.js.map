{"version":3,"sources":["components/Container/Container.js","components/Navigation/Navigation.js","components/AuthNav/AuthNav.js","redux/auth/auth-selectors.js","components/UserMenu/UserMenu.js","components/AppBar/AppBar.js","components/App.js","redux/contacts/contacts-reducer.js","redux/auth/auth-slice.js","redux/store.js","index.js","services/contacts-api.js","redux/contacts/contacts-operations.js","components/Navigation/Navigation.module.css","redux/auth/auth-operations.js","redux/contacts/contacts-actions.js","components/UserMenu/UserMenu.module.css","components/Loader/Loader.module.css","components/Loader/Loader.js","components/Container/Container.module.css","components/AppBar/AppBar.module.css"],"names":["Container","children","className","s","container","Navigation","nav","to","isActive","nav__link_active","nav__link","AuthNav","getUserName","state","auth","user","name","getIsLoggedIn","isLoggedIn","getIsFetchingUser","isFetchingCurrentUser","UserMenu","dispatch","useDispatch","useSelector","stringToColor","string","i","hash","length","charCodeAt","color","toString","substr","user_menu","Avatar","sx","bgcolor","split","stringAvatar","user_menu__avatar","user_menu__greeting","Button","user_menu__button","variant","onClick","authOperations","AppBar","app_bar","HomePage","lazy","ContactsPage","RegisterPage","LoginPage","NotFoundPage","Phonebook","useEffect","fallback","Loader","path","element","replace","entities","createReducer","fetchContacts","fulfilled","_","action","payload","addContact","delContact","filter","id","isLoading","pending","rejected","actions","error","combineReducers","authSlice","createSlice","initialState","email","token","extraReducers","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","contacts","contactsReducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","fetchContactsAPI","a","axios","get","data","addContactAPI","number","newContact","post","delContactAPI","contactId","delete","createAsyncThunk","console","log","contact","module","exports","defaults","baseURL","headers","common","Authorization","register","credentials","login","logout","refresh","thunkAPI","getState","persistedToken","rejectWithValue","changeFilter","createAction","lds_wrapper","lds_default"],"mappings":"2PAGe,SAASA,EAAT,GAAkC,IAAbC,EAAY,EAAZA,SAClC,OAAO,qBAAKC,UAAWC,IAAEC,UAAlB,SAA8BH,I,qBCDxB,SAASI,IACtB,OACE,sBAAKH,UAAWC,IAAEG,IAAlB,UACE,cAAC,IAAD,CACEC,GAAG,IACHL,UAAW,qBAAGM,SACDL,IAAEM,iBAAmBN,IAAEO,WAHtC,kBASA,cAAC,IAAD,CACEH,GAAG,YACHL,UAAW,qBAAGM,SACDL,IAAEM,iBAAmBN,IAAEO,WAHtC,yBCZS,SAASC,IACtB,OACE,sBAAKT,UAAWC,IAAEG,IAAlB,UACE,cAAC,IAAD,CACEC,GAAG,YACHL,UAAW,qBAAGM,SACDL,IAAEM,iBAAmBN,IAAEO,WAHtC,qBASA,cAAC,IAAD,CACEH,GAAG,SACHL,UAAW,qBAAGM,SACDL,IAAEM,iBAAmBN,IAAEO,WAHtC,sB,sCCfOE,EAAc,SAAAC,GAAK,OAAIA,EAAMC,KAAKC,KAAKC,MACvCC,EAAgB,SAAAJ,GAAK,OAAIA,EAAMC,KAAKI,YACpCC,EAAoB,SAAAN,GAAK,OAAIA,EAAMC,KAAKM,uB,iBCMtC,SAASC,IACtB,IAAMC,EAAWC,cACXP,EAAOQ,YAAYZ,GAEzB,SAASa,EAAcC,GACrB,IACIC,EADAC,EAAO,EAIX,IAAKD,EAAI,EAAGA,EAAID,EAAOG,OAAQF,GAAK,EAClCC,EAAOF,EAAOI,WAAWH,KAAOC,GAAQ,GAAKA,GAG/C,IAAIG,EAAQ,IAEZ,IAAKJ,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CAEzBI,GAAS,aADMH,GAAa,EAAJD,EAAU,KACdK,SAAS,KAAMC,QAAQ,GAI7C,OAAOF,EAeT,OACE,sBAAK7B,UAAWC,IAAE+B,UAAlB,UACE,cAACC,EAAA,EAAD,2BAdJ,SAAsBnB,GACpB,MAAO,CACLoB,GAAI,CACFC,QAASZ,EAAcT,IAEzBf,SAC6B,IAA3Be,EAAKsB,MAAM,KAAKT,OAAhB,UACOb,EAAK,IADZ,UAEOA,EAAKsB,MAAM,KAAK,GAAG,IAF1B,OAE+BtB,EAAKsB,MAAM,KAAK,GAAG,KAMxCC,CAAavB,IAAzB,IAAgCd,UAAWC,IAAEqC,qBAC7C,uBAAMtC,UAAWC,IAAEsC,oBAAnB,oBAAgDzB,EAAhD,OACA,cAAC0B,EAAA,EAAD,CACExC,UAAWC,IAAEwC,kBACbC,QAAQ,WACRb,MAAM,QACNc,QAAS,kBAAMvB,EAASwB,QAJ1B,uB,qBCzCS,SAASC,IACtB,IAAM7B,EAAaM,YAAYP,GAC/B,OACE,qBAAIf,UAAWC,IAAE6C,QAAjB,UACE,cAAC3C,EAAD,IACCa,EAAa,cAACG,EAAD,IAAe,cAACV,EAAD,O,YCA7BsC,EAAWC,gBAAK,kBACpB,iCAEIC,EAAeD,gBAAK,kBACxB,iCAEIE,EAAeF,gBAAK,kBACxB,uDAEIG,EAAYH,gBAAK,kBACrB,uDAEII,EAAeJ,gBAAK,kBACxB,iCAKa,SAASK,IACtB,IAAMjC,EAAWC,cACXL,EAAaM,YAAYP,GACzBG,EAAwBI,YAAYL,GAM1C,OAJAqC,qBAAU,WACRlC,EAASwB,SACR,CAACxB,KAGDF,GACC,eAACpB,EAAD,WACE,cAAC+C,EAAD,IAEA,cAAC,WAAD,CAAUU,SAAU,cAACC,EAAA,EAAD,IAApB,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,IAAIC,QAAS,cAACX,EAAD,MACzB,cAAC,IAAD,CACEU,KAAK,YACLC,QACG1C,EAGC,cAAC,IAAD,CAAU2C,SAAO,EAACtD,GAAG,cAFrB,cAAC6C,EAAD,MAMN,cAAC,IAAD,CACEO,KAAK,SACLC,QACG1C,EAGC,cAAC,IAAD,CAAU2C,SAAO,EAACtD,GAAG,cAFrB,cAAC8C,EAAD,MAMN,cAAC,IAAD,CACEM,KAAK,YACLC,QACE1C,EAAa,cAACiC,EAAD,IAAmB,cAAC,IAAD,CAAUU,SAAO,EAACtD,GAAG,aAGzD,cAAC,IAAD,CAAOoD,KAAK,IAAIC,QAAS,cAACN,EAAD,c,mFCrE/BQ,EAAWC,YAAc,IAAD,mBAC3BC,IAAcC,WAAY,SAACC,EAAGC,GAAJ,OAAeA,EAAOC,WADrB,cAE3BC,IAAWJ,WAAY,SAACpD,EAAD,OAAUuD,EAAV,EAAUA,QAAV,4BAA4BvD,GAA5B,CAAmCuD,OAF/B,cAG3BE,IAAWL,WAAY,SAACpD,EAAD,OAAUuD,EAAV,EAAUA,QAAV,OACtBvD,EAAM0D,QAAO,qBAAGC,KAAgBJ,QAJN,IAOxBK,EAAYV,aAAc,GAAD,mBAC5BC,IAAcU,SAAU,kBAAM,KADF,cAE5BV,IAAcC,WAAY,kBAAM,KAFJ,cAG5BD,IAAcW,UAAW,kBAAM,KAHH,IAMzBJ,GAASR,YAAc,GAAD,eACzBa,KAAuB,SAACV,EAAD,YAAME,YAG1BS,GAAQd,YAAc,MAAD,mBACxBC,IAAcW,UAAW,SAACT,EAAGC,GAAJ,OAAeA,EAAOC,WADvB,cAExBJ,IAAcU,SAAU,kBAAM,QAFN,cAGxBL,IAAWM,UAAW,SAACT,EAAGC,GAAJ,OAAeA,EAAOC,WAHpB,cAIxBC,IAAWK,SAAU,kBAAM,QAJH,cAKxBJ,IAAWK,UAAW,SAACT,EAAGC,GAAJ,OAAeA,EAAOC,WALpB,cAMxBE,IAAWI,SAAU,kBAAM,QANH,IASZI,eAAgB,CAC7BhB,WACAW,YACAF,UACAM,WCSaE,GAjCGC,YAAY,CAC5BhE,KAAM,OACNiE,aATmB,CACnBlE,KAAM,CAAEC,KAAM,KAAMkE,MAAO,MAC3BC,MAAO,KACPjE,YAAY,EACZE,uBAAuB,GAMvBgE,eAAa,mBACVtC,IAAwBmB,WADd,SACyBpD,EAAOsD,GACzCtD,EAAME,KAAOoD,EAAOC,QAAQrD,KAC5BF,EAAMsE,MAAQhB,EAAOC,QAAQe,MAC7BtE,EAAMK,YAAa,KAJV,cAMV4B,IAAqBmB,WANX,SAMsBpD,EAAOsD,GACtCtD,EAAME,KAAOoD,EAAOC,QAAQrD,KAC5BF,EAAMsE,MAAQhB,EAAOC,QAAQe,MAC7BtE,EAAMK,YAAa,KATV,cAWV4B,IAAsBmB,WAXZ,SAWuBpD,GAChCA,EAAME,KAAO,CAAEC,KAAM,KAAMkE,MAAO,MAClCrE,EAAMsE,MAAQ,KACdtE,EAAMK,YAAa,KAdV,cAgBV4B,IAAuB4B,SAhBb,SAgBsB7D,GAC/BA,EAAMO,uBAAwB,KAjBrB,cAmBV0B,IAAuBmB,WAnBb,SAmBwBpD,EAAOsD,GACxCtD,EAAME,KAAOoD,EAAOC,QACpBvD,EAAMK,YAAa,EACnBL,EAAMO,uBAAwB,KAtBrB,cAwBV0B,IAAuB6B,UAxBb,SAwBuB9D,GAChCA,EAAMO,uBAAwB,KAzBrB,KA8Bf,QC5BMiE,GAAoB,CACxBC,IAAK,OACLC,YACAC,UAAW,CAAC,UAGDC,GAAQC,YAAe,CAClCC,QAAS,CACP7E,KAAM8E,YAAeP,GAAmBQ,IACxCC,SAAUC,IAGZC,WAAY,SAAAC,GAAoB,OAC9BA,EAAqB,CACnBC,kBAAmB,CACjBC,eAAgB,CAACC,IAAOC,IAAWC,IAAOC,IAASC,IAAOC,SAGhEC,UAAUC,IAGCC,GAAYC,YAAapB,IC3BtCqB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAUvB,MAAOA,GAAjB,SACE,cAAC,IAAD,CAAawB,QAAS,KAAML,UAAWA,GAAvC,SACE,cAAC,IAAD,UACE,cAAC,EAAD,YAKRM,SAASC,eAAe,U,kMCjBnB,SAAeC,IAAtB,+B,4CAAO,8BAAAC,EAAA,sEACkBC,IAAMC,IAAI,aAD5B,uBACGC,EADH,EACGA,KADH,kBAEEA,GAFF,4C,sBAKA,SAAeC,EAAtB,oC,4CAAO,WAA6BzG,EAAM0G,GAAnC,mBAAAL,EAAA,6DACCM,EAAa,CAAE3G,OAAM0G,UADtB,SAEkBJ,IAAMM,KAAK,YAAaD,GAF1C,uBAEGH,EAFH,EAEGA,KAFH,kBAGEA,GAHF,4C,sBAMA,SAAeK,EAAtB,kC,4CAAO,WAA6BC,GAA7B,SAAAT,EAAA,sEACCC,IAAMS,OAAN,oBAA0BD,IAD3B,gCAEEA,GAFF,4C,sBCLA,IAAM9D,EAAgBgE,YAC3BpD,IAD2C,sBAE3C,4BAAAyC,EAAA,sEACyBD,IADzB,cACQtB,EADR,yBAESA,GAFT,4CAMWzB,EAAa2D,YAAiBpD,IAAD,uCAAqB,WAAM4C,GAAN,mBAAAH,EAAA,6DAC7DY,QAAQC,IAAIV,GACJxG,EAAiBwG,EAAjBxG,KAAM0G,EAAWF,EAAXE,OAF+C,SAGvCD,EAAczG,EAAM0G,GAHmB,cAGvDS,EAHuD,yBAItDA,GAJsD,2CAArB,uDAO7B7D,EAAa0D,YAAiBpD,IAAD,uCAAqB,WAAMJ,GAAN,eAAA6C,EAAA,sEACvCQ,EAAcrD,GADyB,cACvD2D,EADuD,yBAEtDA,GAFsD,2CAArB,wD,mBCtB1CC,EAAOC,QAAU,CAAC,IAAM,wBAAwB,UAAY,8BAA8B,iBAAmB,uC,4NCE7Gf,IAAMgB,SAASC,QAAU,wCAEzB,IAAMpD,EAAQ,SACRA,GACFmC,IAAMgB,SAASE,QAAQC,OAAOC,cAA9B,iBAAwDvD,IAFtDA,EAAQ,WAKVmC,IAAMgB,SAASE,QAAQC,OAAOC,cAAgB,IAIrCC,EAAWX,YAAiB,gBAAD,uCAAkB,WAAMY,GAAN,iBAAAvB,EAAA,+EAE/BC,IAAMM,KAAK,gBAAiBgB,GAFG,uBAE9CpB,EAF8C,EAE9CA,KACRrC,EAAUqC,EAAKrC,OAHuC,kBAI/CqC,GAJ+C,gCAMtDS,QAAQC,IAAR,MANsD,yDAAlB,uDAU3BW,EAAQb,YAAiB,aAAD,uCAAe,WAAMY,GAAN,iBAAAvB,EAAA,+EAEzBC,IAAMM,KAAK,eAAgBgB,GAFF,uBAExCpB,EAFwC,EAExCA,KACRrC,EAAUqC,EAAKrC,OAHiC,kBAIzCqC,GAJyC,gCAMhDS,QAAQC,IAAR,MANgD,yDAAf,uDAUxBY,EAASd,YAAiB,cAAD,sBAAgB,sBAAAX,EAAA,+EAE5CC,IAAMM,KAAK,iBAFiC,OAGlDzC,IAHkD,+CAKlD8C,QAAQC,IAAR,MALkD,yDASzCa,EAAUf,YAAiB,eAAD,uCAAiB,WAAO9D,EAAG8E,GAAV,qBAAA3B,EAAA,yDAChDxG,EAAQmI,EAASC,WAEA,QADjBC,EAAiBrI,EAAMC,KAAKqE,OAFoB,yCAGlB6D,EAASG,mBAHS,cAKtDhE,EAAU+D,GAL4C,kBAO7B5B,IAAMC,IAAI,kBAPmB,uBAO5CC,EAP4C,EAO5CA,KAP4C,kBAQ7CA,GAR6C,kCAUpDS,QAAQC,IAAR,MAVoD,0DAAjB,0D,gCC3CvC,mJAEakB,EAAeC,YAAa,0BAC5BrF,EAAgBqF,YAAa,2BAC7BhF,EAAagF,YAAa,wBAC1B/E,EAAa+E,YAAa,yB,mBCJvCjB,EAAOC,QAAU,CAAC,UAAY,4BAA4B,kBAAoB,oCAAoC,oBAAsB,sCAAsC,kBAAoB,sC,mBCAlMD,EAAOC,QAAU,CAAC,YAAc,4BAA4B,YAAc,8B,gCCD1E,mEAGe,SAAS3E,IACtB,OACE,qBAAKxD,UAAWC,IAAEmJ,YAAlB,SACE,sBAAKpJ,UAAWC,IAAEoJ,YAAlB,UACE,wBACA,wBACA,+B,mBCRRnB,EAAOC,QAAU,CAAC,UAAY,+B,mBCA9BD,EAAOC,QAAU,CAAC,QAAU,0B","file":"static/js/main.b419afdd.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\r\nimport s from './Container.module.css';\r\n\r\nexport default function Container({ children }) {\r\n  return <div className={s.container}>{children}</div>;\r\n}\r\n\r\nContainer.propTypes = {\r\n  children: PropTypes.array.isRequired,\r\n};\r\n","import { NavLink } from 'react-router-dom';\r\nimport s from './Navigation.module.css';\r\n\r\nexport default function Navigation() {\r\n  return (\r\n    <nav className={s.nav}>\r\n      <NavLink\r\n        to=\"/\"\r\n        className={({ isActive }) =>\r\n          isActive ? s.nav__link_active : s.nav__link\r\n        }\r\n      >\r\n        Home\r\n      </NavLink>\r\n\r\n      <NavLink\r\n        to=\"/contacts\"\r\n        className={({ isActive }) =>\r\n          isActive ? s.nav__link_active : s.nav__link\r\n        }\r\n      >\r\n        Contacts\r\n      </NavLink>\r\n    </nav>\r\n  );\r\n}\r\n","import { NavLink } from 'react-router-dom';\r\nimport s from '../Navigation/Navigation.module.css';\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <nav className={s.nav}>\r\n      <NavLink\r\n        to=\"/register\"\r\n        className={({ isActive }) =>\r\n          isActive ? s.nav__link_active : s.nav__link\r\n        }\r\n      >\r\n        Sign in\r\n      </NavLink>\r\n\r\n      <NavLink\r\n        to=\"/login\"\r\n        className={({ isActive }) =>\r\n          isActive ? s.nav__link_active : s.nav__link\r\n        }\r\n      >\r\n        Login\r\n      </NavLink>\r\n    </nav>\r\n  );\r\n}\r\n","export const getUserName = state => state.auth.user.name;\r\nexport const getIsLoggedIn = state => state.auth.isLoggedIn;\r\nexport const getIsFetchingUser = state => state.auth.isFetchingCurrentUser;\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Button from '@mui/material/Button';\r\n\r\nimport * as authOperations from '../../redux/auth/auth-operations';\r\nimport { getUserName } from '../../redux/auth/auth-selectors';\r\nimport s from './UserMenu.module.css';\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(getUserName);\r\n\r\n  function stringToColor(string) {\r\n    let hash = 0;\r\n    let i;\r\n\r\n    /* eslint-disable no-bitwise */\r\n    for (i = 0; i < string.length; i += 1) {\r\n      hash = string.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n\r\n    let color = '#';\r\n\r\n    for (i = 0; i < 3; i += 1) {\r\n      const value = (hash >> (i * 8)) & 0xff;\r\n      color += `00${value.toString(16)}`.substr(-2);\r\n    }\r\n    /* eslint-enable no-bitwise */\r\n\r\n    return color;\r\n  }\r\n\r\n  function stringAvatar(name) {\r\n    return {\r\n      sx: {\r\n        bgcolor: stringToColor(name),\r\n      },\r\n      children:\r\n        name.split(' ').length === 1\r\n          ? `${name[0]}`\r\n          : `${name.split(' ')[0][0]}${name.split(' ')[1][0]}`,\r\n    };\r\n  }\r\n\r\n  return (\r\n    <div className={s.user_menu}>\r\n      <Avatar {...stringAvatar(name)} className={s.user_menu__avatar} />\r\n      <span className={s.user_menu__greeting}>Hello, {name}!</span>\r\n      <Button\r\n        className={s.user_menu__button}\r\n        variant=\"outlined\"\r\n        color=\"error\"\r\n        onClick={() => dispatch(authOperations.logout())}\r\n      >\r\n        Logout\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport Navigation from '../Navigation/Navigation';\r\nimport AuthNav from '../AuthNav/AuthNav';\r\nimport UserMenu from '../UserMenu/UserMenu';\r\nimport s from './AppBar.module.css';\r\nimport { getIsLoggedIn } from '../../redux/auth/auth-selectors';\r\n\r\nexport default function AppBar() {\r\n  const isLoggedIn = useSelector(getIsLoggedIn);\r\n  return (\r\n    <ul className={s.app_bar}>\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </ul>\r\n  );\r\n}\r\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { lazy, Suspense } from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\nimport Container from './Container/Container';\nimport AppBar from './AppBar/AppBar';\nimport Loader from './Loader/Loader';\n\nimport * as authOperations from '../redux/auth/auth-operations';\nimport { getIsLoggedIn, getIsFetchingUser } from '../redux/auth/auth-selectors';\n\nconst HomePage = lazy(() =>\n  import('./HomePage/HomePage' /* webpackChunkName: 'home-page' */),\n);\nconst ContactsPage = lazy(() =>\n  import('./ContactsPage/ContactsPage' /* webpackChunkName: 'contacts-page' */),\n);\nconst RegisterPage = lazy(() =>\n  import('./RegisterPage/RegisterPage' /* webpackChunkName: 'movies-page' */),\n);\nconst LoginPage = lazy(() =>\n  import('./LoginPage/LoginPage' /* webpackChunkName: 'movie-details-page' */),\n);\nconst NotFoundPage = lazy(() =>\n  import(\n    './NotFoundPage/NotFoundPage' /* webpackChunkName: 'not-found-page' */\n  ),\n);\n\nexport default function Phonebook() {\n  const dispatch = useDispatch();\n  const isLoggedIn = useSelector(getIsLoggedIn);\n  const isFetchingCurrentUser = useSelector(getIsFetchingUser);\n\n  useEffect(() => {\n    dispatch(authOperations.refresh());\n  }, [dispatch]);\n\n  return (\n    !isFetchingCurrentUser && (\n      <Container>\n        <AppBar />\n\n        <Suspense fallback={<Loader />}>\n          <Routes>\n            <Route path=\"/\" element={<HomePage />} />\n            <Route\n              path=\"/register\"\n              element={\n                !isLoggedIn ? (\n                  <RegisterPage />\n                ) : (\n                  <Navigate replace to=\"/contacts\" />\n                )\n              }\n            />\n            <Route\n              path=\"/login\"\n              element={\n                !isLoggedIn ? (\n                  <LoginPage />\n                ) : (\n                  <Navigate replace to=\"/contacts\" />\n                )\n              }\n            />\n            <Route\n              path=\"/contacts\"\n              element={\n                isLoggedIn ? <ContactsPage /> : <Navigate replace to=\"/login\" />\n              }\n            />\n            <Route path=\"*\" element={<NotFoundPage />} />\n          </Routes>\n        </Suspense>\n      </Container>\n    )\n  );\n}\n","import { createReducer, combineReducers } from '@reduxjs/toolkit';\r\nimport * as actions from './contacts-actions';\r\nimport { fetchContacts, addContact, delContact } from './contacts-operations';\r\n\r\nconst entities = createReducer([], {\r\n  [fetchContacts.fulfilled]: (_, action) => action.payload,\r\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\r\n  [delContact.fulfilled]: (state, { payload }) =>\r\n    state.filter(({ id }) => id !== payload),\r\n});\r\n\r\nconst isLoading = createReducer(false, {\r\n  [fetchContacts.pending]: () => true,\r\n  [fetchContacts.fulfilled]: () => false,\r\n  [fetchContacts.rejected]: () => false,\r\n});\r\n\r\nconst filter = createReducer('', {\r\n  [actions.changeFilter]: (_, { payload }) => payload,\r\n});\r\n\r\nconst error = createReducer(null, {\r\n  [fetchContacts.rejected]: (_, action) => action.payload,\r\n  [fetchContacts.pending]: () => null,\r\n  [addContact.rejected]: (_, action) => action.payload,\r\n  [addContact.pending]: () => null,\r\n  [delContact.rejected]: (_, action) => action.payload,\r\n  [delContact.pending]: () => null,\r\n});\r\n\r\nexport default combineReducers({\r\n  entities,\r\n  isLoading,\r\n  filter,\r\n  error,\r\n});\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport * as authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isFetchingCurrentUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.login.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logout.fulfilled](state) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.refresh.pending](state) {\r\n      state.isFetchingCurrentUser = true;\r\n    },\r\n    [authOperations.refresh.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isFetchingCurrentUser = false;\r\n    },\r\n    [authOperations.refresh.rejected](state) {\r\n      state.isFetchingCurrentUser = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport contactsReducer from './contacts/contacts-reducer';\r\nimport authReducer from './auth/auth-slice';\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    contacts: contactsReducer,\r\n  },\r\n  // official fix of non-serializable data ===\r\n  middleware: getDefaultMiddleware =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }), // ===================================\r\n  devTools: process.env.NODE_ENV === 'development',\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from './components/App';\nimport { store, persistor } from './redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","import axios from 'axios';\r\n\r\nexport async function fetchContactsAPI() {\r\n  const { data } = await axios.get('/contacts');\r\n  return data;\r\n}\r\n\r\nexport async function addContactAPI(name, number) {\r\n  const newContact = { name, number };\r\n  const { data } = await axios.post('/contacts', newContact);\r\n  return data;\r\n}\r\n\r\nexport async function delContactAPI(contactId) {\r\n  await axios.delete(`/contacts/${contactId}`);\r\n  return contactId;\r\n}\r\n","import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport * as actions from './contacts-actions';\r\nimport {\r\n  fetchContactsAPI,\r\n  addContactAPI,\r\n  delContactAPI,\r\n} from '../../services/contacts-api';\r\n\r\nexport const fetchContacts = createAsyncThunk(\r\n  actions.fetchContacts,\r\n  async () => {\r\n    const contacts = await fetchContactsAPI();\r\n    return contacts;\r\n  },\r\n);\r\n\r\nexport const addContact = createAsyncThunk(actions.addContact, async data => {\r\n  console.log(data);\r\n  const { name, number } = data;\r\n  const contact = await addContactAPI(name, number);\r\n  return contact;\r\n});\r\n\r\nexport const delContact = createAsyncThunk(actions.delContact, async id => {\r\n  const contact = await delContactAPI(id);\r\n  return contact;\r\n});\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__3x5Lj\",\"nav__link\":\"Navigation_nav__link__3aRy-\",\"nav__link_active\":\"Navigation_nav__link_active__dLAQV\"};","import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nexport const register = createAsyncThunk('auth/register', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/signup', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n});\r\n\r\nexport const login = createAsyncThunk('auth/login', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/login', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n});\r\n\r\nexport const logout = createAsyncThunk('auth/logout', async () => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unset();\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n});\r\n\r\nexport const refresh = createAsyncThunk('auth/refresh', async (_, thunkAPI) => {\r\n  const state = thunkAPI.getState();\r\n  const persistedToken = state.auth.token;\r\n  if (persistedToken === null) return thunkAPI.rejectWithValue();\r\n\r\n  token.set(persistedToken);\r\n  try {\r\n    const { data } = await axios.get('/users/current');\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n});\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\nexport const changeFilter = createAction('Phonebook/changeFilter');\r\nexport const fetchContacts = createAction('Phonebook/fetchContacts');\r\nexport const addContact = createAction('Phonebook/addContact');\r\nexport const delContact = createAction('Phonebook/delContact');\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user_menu\":\"UserMenu_user_menu__1Yrd3\",\"user_menu__avatar\":\"UserMenu_user_menu__avatar__2Wh-d\",\"user_menu__greeting\":\"UserMenu_user_menu__greeting__2BovF\",\"user_menu__button\":\"UserMenu_user_menu__button__3Pd4d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lds_wrapper\":\"Loader_lds_wrapper__XwnsC\",\"lds_default\":\"Loader_lds_default__2rVvq\"};","import React from 'react';\r\nimport s from './Loader.module.css';\r\n\r\nexport default function Loader() {\r\n  return (\r\n    <div className={s.lds_wrapper}>\r\n      <div className={s.lds_default}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__BqGaC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app_bar\":\"AppBar_app_bar__2E5hs\"};"],"sourceRoot":""}